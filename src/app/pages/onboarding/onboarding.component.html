<div class="onboarding-container">
  <div class="page-header">
    <h2>Theo dõi Phòng Họp</h2>
    <p>Quản lý và theo dõi trạng thái đặt phòng họp</p>
  </div>

  <!-- Room Statistics Cards -->
  <div nz-row [nzGutter]="16" class="stats-row">
    <div nz-col [nzSpan]="6">
      <nz-card class="stat-card total-card">
        <div class="stat-content">
          <div class="stat-icon">
            <span nz-icon nzType="home" nzTheme="outline"></span>
          </div>
          <div class="stat-details">
            <nz-statistic 
              [nzValue]="roomStats.total" 
              [nzTitle]="'Tổng số phòng'"
              [nzValueStyle]="{ color: '#1890ff', fontSize: '22px', fontWeight: '600' }">
            </nz-statistic>
          </div>
        </div>
      </nz-card>
    </div>

    <div nz-col [nzSpan]="6">
      <nz-card class="stat-card available-card">
        <div class="stat-content">
          <div class="stat-icon available-icon">
            <span nz-icon nzType="check-circle" nzTheme="outline"></span>
          </div>
          <div class="stat-details">
            <nz-statistic 
              [nzValue]="roomStats.available" 
              [nzTitle]="'Phòng đang trống'"
              [nzValueStyle]="{ color: '#52c41a', fontSize: '22px', fontWeight: '600' }">
            </nz-statistic>
          </div>
        </div>
      </nz-card>
    </div>

    <div nz-col [nzSpan]="6">
      <nz-card class="stat-card occupied-card">
        <div class="stat-content">
          <div class="stat-icon occupied-icon">
            <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
          </div>
          <div class="stat-details">
            <nz-statistic 
              [nzValue]="roomStats.occupied" 
              [nzTitle]="'Phòng đang hoạt động'"
              [nzValueStyle]="{ color: '#faad14', fontSize: '22px', fontWeight: '600' }">
            </nz-statistic>
          </div>
        </div>
      </nz-card>
    </div>

    <div nz-col [nzSpan]="6">
      <nz-card class="stat-card maintenance-card">
        <div class="stat-content">
          <div class="stat-icon maintenance-icon">
            <span nz-icon nzType="tool" nzTheme="outline"></span>
          </div>
          <div class="stat-details">
            <nz-statistic 
              [nzValue]="roomStats.maintenance" 
              [nzTitle]="'Đang bảo trì'"
              [nzValueStyle]="{ color: '#ff4d4f', fontSize: '22px', fontWeight: '600' }">
            </nz-statistic>
          </div>
        </div>
      </nz-card>
    </div>
  </div>

  <nz-card>
    <nz-tabset [(nzSelectedIndex)]="selectedIndex">
      <nz-tab nzTitle="Chờ Phê Duyệt">
        <nz-table
          #pendingTable
          [nzData]="pendingBookings"
          [nzLoading]="loading"
          [nzPageSize]="10"
        >
          <thead>
            <tr>
              <th>Mã đặt phòng</th>
              <th>Phòng họp</th>
              <th>Người đặt</th>
              <th>Ngày họp</th>
              <th>Thời gian</th>
              <th>Trạng thái</th>
              <th>Hành động</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let booking of pendingTable.data">
              <td>{{ booking.id }}</td>
              <td>{{ booking.roomName }}</td>
              <td>{{ booking.userName }}</td>
              <td>{{ booking.date | date: 'dd/MM/yyyy' }}</td>
              <td>{{ booking.startTime }} - {{ booking.endTime }}</td>
              <td>
                <nz-tag [nzColor]="'orange'">Chờ phê duyệt</nz-tag>
              </td>
              <td>
                <button nz-button nzType="primary" nzSize="small" (click)="approveBooking(booking.id)">
                  <span nz-icon nzType="check"></span>
                  Phê duyệt
                </button>
                <button nz-button nzDanger nzSize="small" (click)="rejectBooking(booking.id)" style="margin-left: 8px;">
                  <span nz-icon nzType="close"></span>
                  Từ chối
                </button>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </nz-tab>

      <nz-tab nzTitle="Đã Phê Duyệt">
        <nz-table
          #approvedTable
          [nzData]="approvedBookings"
          [nzLoading]="loading"
          [nzPageSize]="10"
        >
          <thead>
            <tr>
              <th>Mã đặt phòng</th>
              <th>Phòng họp</th>
              <th>Người đặt</th>
              <th>Ngày họp</th>
              <th>Thời gian</th>
              <th>Trạng thái</th>
              <th>Người phê duyệt</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let booking of approvedTable.data">
              <td>{{ booking.id }}</td>
              <td>{{ booking.roomName }}</td>
              <td>{{ booking.userName }}</td>
              <td>{{ booking.date | date: 'dd/MM/yyyy' }}</td>
              <td>{{ booking.startTime }} - {{ booking.endTime }}</td>
              <td>
                <nz-tag [nzColor]="'green'">Đã phê duyệt</nz-tag>
              </td>
              <td>{{ booking.approvedBy || '-' }}</td>
            </tr>
          </tbody>
        </nz-table>
      </nz-tab>

      <nz-tab nzTitle="Đã Từ Chối">
        <nz-table
          #rejectedTable
          [nzData]="rejectedBookings"
          [nzLoading]="loading"
          [nzPageSize]="10"
        >
          <thead>
            <tr>
              <th>Mã đặt phòng</th>
              <th>Phòng họp</th>
              <th>Người đặt</th>
              <th>Ngày họp</th>
              <th>Thời gian</th>
              <th>Trạng thái</th>
              <th>Lý do</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let booking of rejectedTable.data">
              <td>{{ booking.id }}</td>
              <td>{{ booking.roomName }}</td>
              <td>{{ booking.userName }}</td>
              <td>{{ booking.date | date: 'dd/MM/yyyy' }}</td>
              <td>{{ booking.startTime }} - {{ booking.endTime }}</td>
              <td>
                <nz-tag [nzColor]="'red'">Đã từ chối</nz-tag>
              </td>
              <td>{{ booking.rejectReason || '-' }}</td>
            </tr>
          </tbody>
        </nz-table>
      </nz-tab>
    </nz-tabset>
  </nz-card>
</div>
